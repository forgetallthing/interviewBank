var ce=Object.defineProperty;var j=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var z=(e,o,s)=>o in e?ce(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,F=(e,o)=>{for(var s in o||(o={}))ue.call(o,s)&&z(e,s,o[s]);if(j)for(var s of j(o))de.call(o,s)&&z(e,s,o[s]);return e};import{a as pe,E as x,r as A,o as me,b as C,c as v,d as b,e as a,u as f,w as u,f as q,g as Q,v as U,F as D,h as R,i as p,j as fe,k as m,l as _e,m as B,n as E,p as ge,q as he,t as I,s as ve,x as ye}from"./vendor.1151c95d.js";const be=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))k(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const _ of d.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&k(_)}).observe(document,{childList:!0,subtree:!0});function s(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerpolicy&&(d.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?d.credentials="include":n.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function k(n){if(n.ep)return;n.ep=!0;const d=s(n);fetch(n.href,d)}};be();const N=pe.create({baseURL:"",timeout:5e4,withCredentials:!0});N.interceptors.request.use(e=>{const o=F({},e);let s={param:JSON.stringify(e.param||{})};return e.method==="get"?o.params=s:e.method==="post"&&(o.data=s),o},e=>(console.error(e),Promise.reject(e)));N.interceptors.response.use(e=>{const o=e.data;return o.state==="err"?(x({message:o.value||"Error",type:"error",duration:5*1e3}),Promise.reject(new Error(o.value||"Error"))):o},e=>(console.log(`err${e}`),x({message:e.message,type:"error",duration:5*1e3}),Promise.reject(e)));function ke(e){return N({url:"/question/getQuestion",method:"get",param:e})}function Ce(e){return N({url:"/question/saveQuestion",method:"post",param:e})}function xe(e){return N({url:"/question/delQuestion",method:"post",param:e})}function Ne(e){return N({url:"/question/getClass",method:"get",param:e})}const we={class:"el-container"},Ee={class:"el-aside"},Ve={class:"el-main"},Te={class:"tools"},qe=E("\u6DFB\u52A0\u8BD5\u9898"),Be=E("\u5173\u95ED"),Le=E("\u5220\u9664"),Me=E("\u4FDD\u5B58"),Ae={key:0,class:"formEditor"},Se={class:"list",style:{overflow:"auto"},"infinite-scroll-disabled":"noMore"},Oe=["innerHTML"],$e=E("\u7F16\u8F91"),He=["innerHTML"],Pe={key:0,class:"tips"},je={key:1,class:"tips"},ze={setup(e){document.documentElement.clientWidth>500?document.getElementsByTagName("body")[0].className="aside-open":document.getElementsByTagName("body")[0].className="aside-close";const o=()=>{document.getElementsByTagName("body")[0].className==="aside-open"?document.getElementsByTagName("body")[0].className="aside-close":document.getElementsByTagName("body")[0].className="aside-open"},s=A([]),k=t=>{const l={};for(let g=0;g<t.length;g++){const i=t[g],h={label:i.label,code:i.code,children:[]};if(i.father){let T=l[i.father];T?T.children.push(h):l[i.father]={code:i.father,children:[h]},l[i.code]=h}else l[i.code]?l[i.code].label=i.label:l[i.code]=h,s.push(l[i.code])}};me(async()=>{const t=await Ne();console.log(t),k(t.list),L()});const n={children:"children",label:"label"},d=A([]),_=C(!1),V=C(!1),O=C(0),$=C(null),L=async()=>{if(_.value)return;_.value=!0;const t=await ke({page:O.value++,count:20,class:$.value,search:""});console.log(t),_.value=!1,t.list.length>0?d.push(...t.list):V.value=!0},H=(t,l)=>{Array.isArray(t)||(t=[t]);for(let g=0;g<t.length;g++){l.push(t[g].code);const i=t[g].children;i.length>0&&H(i,l)}return l},K=async t=>{console.log(t),$.value=H(t,[]),_.value=!1,O.value=0,L()},y=C(!1),r=A({class:"",level:0,sort:"",question:"",answer:"",code:""}),M=C("add"),W=()=>{M.value="add",y.value=!0},Y=t=>{M.value="update",y.value=!0,r.class=t.class,r.level=t.level,r.sort=t.sort,r.question=t.question,r.answer=t.answer,r.code=t.code},J=async()=>{console.log(r),(await Ce(r)).state==="ok"?x({type:"success",message:"\u4FDD\u5B58\u6210\u529F"}):x({type:"error",message:"\u4FDD\u5B58\u5931\u8D25"})},G=()=>{ge.confirm("\u786E\u8BA4\u5220\u9664?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{(await xe({code:r.code})).state==="ok"?x({type:"success",message:"\u5220\u9664\u6210\u529F"}):x({type:"error",message:"\u5220\u9664\u5931\u8D25"})})},X=t=>{console.log(t),r.question=t},Z=t=>{console.log(t),r.answer=t};return(t,l)=>{const g=p("el-tree"),i=p("el-icon"),h=p("el-button"),T=p("el-space"),P=p("TEditor"),w=p("el-form-item"),ee=p("el-option"),te=p("el-select"),oe=p("el-rate"),se=p("el-input"),le=p("el-form"),ne=p("el-collapse-item"),ae=p("el-collapse"),re=p("el-card"),ie=fe("infinite-scroll");return m(),v("div",we,[b("div",Ee,[a(g,{data:f(s),props:n,onNodeClick:K,"highlight-current":!0},null,8,["data"])]),b("div",Ve,[b("div",{class:"sidebar-toggle",onClick:o},[a(i,{size:26,color:"#989494"},{default:u(()=>[a(f(_e))]),_:1})]),b("div",Te,[a(T,{wrap:""},{default:u(()=>[y.value?(m(),B(h,{key:1,type:"primary",onClick:l[1]||(l[1]=c=>y.value=!1)},{default:u(()=>[Be]),_:1})):(m(),B(h,{key:0,type:"primary",onClick:l[0]||(l[0]=c=>W())},{default:u(()=>[qe]),_:1})),M.value==="update"&&y.value?(m(),B(h,{key:2,type:"primary",onClick:l[2]||(l[2]=c=>G())},{default:u(()=>[Le]),_:1})):q("",!0),Q(a(h,{type:"primary",onClick:J},{default:u(()=>[Me]),_:1},512),[[U,y.value]])]),_:1})]),y.value?(m(),v("div",Ae,[a(le,{ref:"formRef",model:f(r)},{default:u(()=>[a(w,{label:"\u9898\u5E72"},{default:u(()=>[a(P,{ref:"editor",value:f(r).question,onContentchange:X},null,8,["value"])]),_:1}),a(w,{label:"\u7B54\u6848"},{default:u(()=>[a(P,{ref:"editor",value:f(r).answer,onContentchange:Z},null,8,["value"])]),_:1}),a(w,{label:"\u5206\u7C7B"},{default:u(()=>[a(te,{modelValue:f(r).class,"onUpdate:modelValue":l[3]||(l[3]=c=>f(r).class=c),placeholder:"\u9009\u62E9\u5206\u7C7B"},{default:u(()=>[(m(!0),v(D,null,R(t.dataClass,c=>(m(),B(ee,{label:c.label,value:c.code,key:c.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(w,{label:"\u6743\u91CD"},{default:u(()=>[a(oe,{modelValue:f(r).level,"onUpdate:modelValue":l[4]||(l[4]=c=>f(r).level=c)},null,8,["modelValue"])]),_:1}),a(w,{label:"\u6392\u5E8F"},{default:u(()=>[a(se,{modelValue:f(r).sort,"onUpdate:modelValue":l[5]||(l[5]=c=>f(r).sort=c)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):q("",!0),Q((m(),v("ul",Se,[(m(!0),v(D,null,R(f(d),c=>(m(),v("li",{key:c.level,class:"list-item"},[a(re,{class:"box-card"},{default:u(()=>[b("span",{innerHTML:c.question},null,8,Oe),b("div",null,[a(h,{type:"primary",onClick:Ie=>Y(c)},{default:u(()=>[$e]),_:2},1032,["onClick"])]),a(ae,null,{default:u(()=>[a(ne,{title:"\u7B54\u6848",name:"1"},{default:u(()=>[b("span",{innerHTML:c.answer},null,8,He)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),b("li",null,[_.value?(m(),v("p",Pe,"Loading...")):q("",!0),V.value?(m(),v("p",je,"No more")):q("",!0)])])),[[ie,L],[U,!y.value]])])])}}};var Fe=(e,o)=>{const s=e.__vccOpts||e;for(const[k,n]of o)s[k]=n;return s};const Qe={name:"TEditor",components:{Editor:he},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"print preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount textpattern autosave "},toolbar:{type:[String,Array],default:"fullscreen undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright alignjustify outdent indent |                 styleselect formatselect fontselect fontsizeselect | bullist numlist | blockquote subscript superscript removeformat |                 table image media charmap hr pagebreak insertdatetime print preview | code selectall searchreplace visualblocks | indent2em lineheight formatpainter axupimgs"}},data(){return{init:{language_url:"/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"/tinymce/skins/ui/oxide",plugins:this.plugins,toolbar:this.toolbar,fontsize_formats:"12px 14px 16px 18px 20px 22px 24px 28px 32px 36px 48px 56px 72px",font_formats:"\u5FAE\u8F6F\u96C5\u9ED1=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;\u82F9\u679C\u82F9\u65B9=PingFang SC,Microsoft YaHei,sans-serif;\u5B8B\u4F53=simsun,serif;\u4EFF\u5B8B\u4F53=FangSong,serif;\u9ED1\u4F53=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",lineheight_formats:"0.5 0.8 1 1.2 1.5 1.75 2 2.5 3 4 5",height:400,placeholder:"\u5728\u8FD9\u91CC\u8F93\u5165\u6587\u5B57",branding:!1,resize:!1,elementpath:!1,content_style:"img {max-width:100%;}",content_css:"/tinymce/tinycontent.css",paste_data_images:!0,images_upload_handler:(e,o,s)=>{}},contentValue:this.value}},watch:{value(e){console.log(e),this.contentValue=e},contentValue(e){console.log(e,this.$data),this.$emit("contentchange",e)}},created(){console.log(this.value)},mounted(){I.init({})},updated(){},methods:{onClick(e){this.$emit("onClick",e,I)},clear(){this.contentValue=""}}},Ue={class:"tinymce-box"};function De(e,o,s,k,n,d){const _=p("Editor");return m(),v("div",Ue,[a(_,{modelValue:n.contentValue,"onUpdate:modelValue":o[0]||(o[0]=V=>n.contentValue=V),init:n.init,disabled:s.disabled,onOnClick:d.onClick},null,8,["modelValue","init","disabled","onOnClick"])])}var Re=Fe(Qe,[["render",De]]);const S=ve(ze);S.use(ye);S.component("TEditor",Re);S.mount("#app");
