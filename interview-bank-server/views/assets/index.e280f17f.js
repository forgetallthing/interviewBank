var fe=Object.defineProperty,_e=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var Q=(e,s,n)=>s in e?fe(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,A=(e,s)=>{for(var n in s||(s={}))he.call(s,n)&&Q(e,n,s[n]);if(F)for(var n of F(s))ve.call(s,n)&&Q(e,n,s[n]);return e},U=(e,s)=>_e(e,ge(s));import{a as ye,E as C,r as O,b as x,o as be,c as v,d as b,e as r,u as f,w as u,f as q,g as N,h as D,v as I,F as R,i as W,j as Y,k as p,l as ke,m,n as xe,p as B,q as Ce,t as J,s as Ne,x as we}from"./vendor.2682482e.js";const Ee=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))y(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const k of d.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&y(k)}).observe(document,{childList:!0,subtree:!0});function n(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerpolicy&&(d.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?d.credentials="include":a.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function y(a){if(a.ep)return;a.ep=!0;const d=n(a);fetch(a.href,d)}};Ee();const w=ye.create({baseURL:"",timeout:5e4,withCredentials:!0});w.interceptors.request.use(e=>{const s=A({},e);let n={param:JSON.stringify(e.param||{})};return e.method==="get"?s.params=n:e.method==="post"&&(s.data=n),s},e=>(console.error(e),Promise.reject(e)));w.interceptors.response.use(e=>{const s=e.data;return s.state==="err"?(C({message:s.errmsg||"Error",type:"error",duration:5*1e3}),Promise.reject(new Error(s.value||"Error"))):s},e=>(console.log(`err${e}`),C({message:e.message,type:"error",duration:5*1e3}),Promise.reject(e)));function Te(e){return w({url:"/question/getQuestion",method:"get",param:e})}function Ve(e){return w({url:"/question/saveQuestion",method:"post",param:e})}function qe(e){return w({url:"/question/delQuestion",method:"post",param:e})}function Be(e){return w({url:"/question/getClass",method:"get",param:e})}const Se={class:"el-container"},Le={class:"el-aside"},Me={class:"el-main"},Ae={class:"tools"},Oe=B("\u6DFB\u52A0\u8BD5\u9898"),He=B("\u5173\u95ED"),Pe=B("\u5220\u9664"),$e=B("\u4FDD\u5B58"),Ke={key:0,class:"formEditor"},je={class:"list",style:{overflow:"auto"},"infinite-scroll-disabled":"noMore"},ze=["innerHTML"],Fe={key:0,class:"tools"},Qe=B("\u7F16\u8F91"),Ue=["innerHTML"],De={key:0,class:"tips"},Ie={key:1,class:"tips"},Re={setup(e){const s=localStorage.getItem("secretKey");document.documentElement.clientWidth>500?document.getElementsByTagName("body")[0].className="aside-open":document.getElementsByTagName("body")[0].className="aside-close";const n=()=>{document.getElementsByTagName("body")[0].className==="aside-open"?document.getElementsByTagName("body")[0].className="aside-close":document.getElementsByTagName("body")[0].className="aside-open"},y=O([]),a=t=>{const o={};for(let g=0;g<t.length;g++){const i=t[g],h={label:i.label,code:i.code,children:[]};if(i.father){let S=o[i.father];S?S.children.push(h):o[i.father]={code:i.father,children:[h]},o[i.code]=h}else o[i.code]?o[i.code].label=i.label:o[i.code]=h,y.push(o[i.code])}},d=x([]);be(async()=>{const t=await Be();console.log(t),d.value=t.list,a([{code:null,label:"\u5168\u90E8",father:"",sort:0},...t.list]),L()});const k={children:"children",label:"label"},E=O([]),T=x(!1),P=x(!1),$=x(0),K=x(null),L=async()=>{if(T.value)return;T.value=!0;const t=await Te({page:$.value++,count:20,class:K.value,search:""});console.log(t),T.value=!1,t.list.length>0?E.push(...t.list):P.value=!0},j=(t,o)=>{Array.isArray(t)||(t=[t]);for(let g=0;g<t.length;g++){o.push(t[g].code);const i=t[g].children;i.length>0&&j(i,o)}return o},G=async t=>{console.log(t),E.length=0;const o=j(t,[]);K.value=o[0]===null?null:o,T.value=!1,$.value=0,L()},_=x(!1),l=O({class:"",level:0,sort:"",question:"",answer:"",code:""}),M=x("add"),X=()=>{M.value="add",_.value=!0,l.class="",l.level=0,l.sort="",l.question="",l.answer="",l.code=""},Z=t=>{M.value="update",_.value=!0,l.class=t.class,l.level=t.level,l.sort=t.sort,l.question=t.question,l.answer=t.answer,l.code=t.code},ee=async()=>{console.log(l),(await Ve(U(A({},l),{key:s}))).state==="ok"?(C({type:"success",message:"\u4FDD\u5B58\u6210\u529F"}),_.value=!1):C({type:"error",message:"\u4FDD\u5B58\u5931\u8D25"})},te=()=>{Y.confirm("\u786E\u8BA4\u5220\u9664?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{(await qe({code:l.code,key:s})).state==="ok"?(C({type:"success",message:"\u5220\u9664\u6210\u529F"}),_.value=!1):C({type:"error",message:"\u5220\u9664\u5931\u8D25"})})},se=t=>{l.question=t},oe=t=>{l.answer=t},le=()=>{Y.prompt("Please input your secretKey","Tip",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(({value:t})=>{localStorage.setItem("secretKey",t),C({type:"success",message:"\u5BC6\u94A5\u8BBE\u7F6E\u6210\u529F"})})};return(t,o)=>{const g=p("el-tree"),i=p("el-icon"),h=p("el-button"),S=p("el-space"),z=p("TEditor"),V=p("el-form-item"),ne=p("el-option"),ae=p("el-select"),re=p("el-rate"),ie=p("el-input"),ce=p("el-form"),ue=p("el-collapse-item"),de=p("el-collapse"),pe=p("el-card"),me=ke("infinite-scroll");return m(),v("div",Se,[b("div",Le,[b("div",{class:"header",onDblclick:le},"\u9022\u8003\u5FC5\u8FC7",32),r(g,{data:f(y),props:k,onNodeClick:G,"highlight-current":!0},null,8,["data"])]),b("div",Me,[b("div",{class:"sidebar-toggle",onClick:n},[r(i,{size:26,color:"#989494"},{default:u(()=>[r(f(xe))]),_:1})]),b("div",Ae,[f(s)?(m(),q(S,{key:0,wrap:""},{default:u(()=>[_.value?(m(),q(h,{key:1,type:"primary",onClick:o[1]||(o[1]=c=>_.value=!1)},{default:u(()=>[He]),_:1})):(m(),q(h,{key:0,type:"primary",onClick:o[0]||(o[0]=c=>X())},{default:u(()=>[Oe]),_:1})),M.value==="update"&&_.value?(m(),q(h,{key:2,type:"primary",onClick:o[2]||(o[2]=c=>te())},{default:u(()=>[Pe]),_:1})):N("",!0),D(r(h,{type:"primary",onClick:ee},{default:u(()=>[$e]),_:1},512),[[I,_.value]])]),_:1})):N("",!0)]),_.value?(m(),v("div",Ke,[r(ce,{ref:"formRef",model:f(l)},{default:u(()=>[r(V,{label:"\u9898\u5E72"},{default:u(()=>[r(z,{ref:"editor",value:f(l).question,onContentchange:se},null,8,["value"])]),_:1}),r(V,{label:"\u7B54\u6848"},{default:u(()=>[r(z,{ref:"editor",value:f(l).answer,onContentchange:oe},null,8,["value"])]),_:1}),r(V,{label:"\u5206\u7C7B"},{default:u(()=>[r(ae,{modelValue:f(l).class,"onUpdate:modelValue":o[3]||(o[3]=c=>f(l).class=c),placeholder:"\u9009\u62E9\u5206\u7C7B"},{default:u(()=>[(m(!0),v(R,null,W(d.value,c=>(m(),q(ne,{label:c.label,value:c.code,key:c.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(V,{label:"\u6743\u91CD"},{default:u(()=>[r(re,{modelValue:f(l).level,"onUpdate:modelValue":o[4]||(o[4]=c=>f(l).level=c)},null,8,["modelValue"])]),_:1}),r(V,{label:"\u6392\u5E8F"},{default:u(()=>[r(ie,{modelValue:f(l).sort,"onUpdate:modelValue":o[5]||(o[5]=c=>f(l).sort=c)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):N("",!0),D((m(),v("ul",je,[(m(!0),v(R,null,W(f(E),c=>(m(),v("li",{key:c.level,class:"list-item"},[r(pe,{class:"box-card"},{default:u(()=>[b("span",{innerHTML:c.question},null,8,ze),f(s)?(m(),v("div",Fe,[r(h,{type:"primary",onClick:Ze=>Z(c)},{default:u(()=>[Qe]),_:2},1032,["onClick"])])):N("",!0),r(de,null,{default:u(()=>[r(ue,{title:"\u7B54\u6848",name:"1"},{default:u(()=>[b("span",{innerHTML:c.answer},null,8,Ue)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),b("li",null,[T.value?(m(),v("p",De,"Loading...")):N("",!0),P.value?(m(),v("p",Ie,"No more")):N("",!0)])])),[[me,L],[I,!_.value]])])])}}};var We=(e,s)=>{const n=e.__vccOpts||e;for(const[y,a]of s)n[y]=a;return n};const Ye={name:"TEditor",components:{Editor:Ce},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"print preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount textpattern autosave "},toolbar:{type:[String,Array],default:"fullscreen undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright alignjustify outdent indent |                 styleselect formatselect fontselect fontsizeselect | bullist numlist | blockquote subscript superscript removeformat |                 table image media charmap hr pagebreak insertdatetime print preview | code selectall searchreplace visualblocks | indent2em lineheight formatpainter axupimgs"}},data(){return{init:{language_url:"/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"/tinymce/skins/ui/oxide",plugins:this.plugins,toolbar:this.toolbar,fontsize_formats:"12px 14px 16px 18px 20px 22px 24px 28px 32px 36px 48px 56px 72px",font_formats:"\u5FAE\u8F6F\u96C5\u9ED1=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;\u82F9\u679C\u82F9\u65B9=PingFang SC,Microsoft YaHei,sans-serif;\u5B8B\u4F53=simsun,serif;\u4EFF\u5B8B\u4F53=FangSong,serif;\u9ED1\u4F53=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",lineheight_formats:"0.5 0.8 1 1.2 1.5 1.75 2 2.5 3 4 5",height:400,placeholder:"\u5728\u8FD9\u91CC\u8F93\u5165\u6587\u5B57",branding:!1,resize:!1,elementpath:!1,content_style:"img {max-width:100%;}",content_css:"/tinymce/tinycontent.css",paste_data_images:!0,images_upload_handler:(e,s,n)=>{}},contentValue:this.value}},watch:{value(e){console.log(e),this.contentValue=e},contentValue(e){console.log(e,this.$data),this.$emit("contentchange",e)}},created(){console.log(this.value)},mounted(){J.init({})},updated(){},methods:{onClick(e){this.$emit("onClick",e,J)},clear(){this.contentValue=""}}},Je={class:"tinymce-box"};function Ge(e,s,n,y,a,d){const k=p("Editor");return m(),v("div",Je,[r(k,{modelValue:a.contentValue,"onUpdate:modelValue":s[0]||(s[0]=E=>a.contentValue=E),init:a.init,disabled:n.disabled,onOnClick:d.onClick},null,8,["modelValue","init","disabled","onOnClick"])])}var Xe=We(Ye,[["render",Ge]]);const H=Ne(Re);H.use(we);H.component("TEditor",Xe);H.mount("#app");
